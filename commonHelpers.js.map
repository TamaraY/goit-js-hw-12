{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst URL = 'https://pixabay.com/api/';\nconst API_KEY = '45322930-bdaa0e26907d60cc8a145e4be';\n\nasync function searchImageByQuery(query, page = 1, perPage = 16) {\n  try {\n    const params = new URLSearchParams({\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: perPage,\n    });\n\n    const response = await axios.get(`${URL}?${params}`);\n    return response.data;\n  } catch (error) {\n    throw new Error(error.response.status);\n  }\n}\n\nexport { searchImageByQuery };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst galleryLightbox = new SimpleLightbox('.gallery a', {});\n\nfunction galleryItems(images) {\n  const imageItems = images.map(\n    ({\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    }) => `\n    <div class=\"card\">\n    <a href=\"${largeImageURL}\" >\n      <img src=\"${webformatURL}\" alt=\"${tags}\" /> </a>\n      <div class=\"info\">\n<ul> \n           <li > <p class=\"info-name\"> Likes: </p> <p>${likes}</p></li>\n           <li ><p class=\"info-name\"> Views: </p> <p>${views}</p></li>\n          <li > <p class=\"info-name\"> Comments: </p> <p>${comments}</p></li>\n           <li ><p class=\"info-name\"> Downloads: </p> <p>${downloads}</p></li>\n      </ul>\n          </div>\n          </div>\n`\n  );\n\n  gallery.insertAdjacentHTML('beforeend', imageItems.join(''));\n  galleryLightbox.refresh();\n}\n\nexport { galleryItems };\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { searchImageByQuery } from './js/pixabay-api.js';\nimport { galleryItems } from './js/render-functions.js';\n\nconst searchForm = document.querySelector('#search-form');\nconst searchInput = document.querySelector('input[name=\"query\"]');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('#load-more');\n\nlet currentPage = 1;\nlet currentQuery = '';\nconst perPage = 16;\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  const userQuery = searchInput.value.trim();\n  if (!userQuery) {\n    return iziToast.show({\n      position: 'center',\n      backgroundColor: 'orange',\n      messageColor: 'white',\n      message: 'Please fill in a search field.',\n    });\n  }\n\n  loader.style.display = 'block';\n  currentQuery = userQuery;\n  currentPage = 1;\n  gallery.innerHTML = '';\n\n  try {\n    const data = await searchImageByQuery(currentQuery, currentPage, perPage);\n    loader.style.display = 'none';\n    if (data.hits.length === 0) {\n      loadMoreBtn.style.display = 'none';\n      return iziToast.show({\n        position: 'topRight',\n        backgroundColor: 'red',\n        messageColor: 'white',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n    iziToast.show({\n      position: 'topRight',\n      backgroundColor: 'green',\n      messageColor: 'white',\n      message: `Found ${data.totalHits} results.`,\n    });\n\n    galleryItems(data.hits);\n    searchForm.reset();\n\n    if (data.totalHits > perPage) {\n      loadMoreBtn.style.display = 'block';\n    } else {\n      loadMoreBtn.style.display = 'none';\n    }\n  } catch (error) {\n    loader.style.display = 'none';\n    iziToast.show({\n      position: 'topRight',\n      backgroundColor: 'red',\n      messageColor: 'white',\n      message: 'Error during the request. Please try again later.',\n    });\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n  loader.style.display = 'block';\n\n  try {\n    const data = await searchImageByQuery(currentQuery, currentPage, perPage);\n    loader.style.display = 'none';\n    galleryItems(data.hits);\n\n    const totalLoaded = currentPage * perPage;\n    if (totalLoaded >= data.totalHits) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.show({\n        position: 'topRight',\n        backgroundColor: 'orange',\n        messageColor: 'white',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      const { height: cardHeight } = document\n        .querySelector('.gallery')\n        .firstElementChild.getBoundingClientRect();\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch (error) {\n    loader.style.display = 'none';\n    iziToast.show({\n      position: 'topRight',\n      backgroundColor: 'red',\n      messageColor: 'white',\n      message: 'Error during the request. Please try again later.',\n    });\n  }\n});\n"],"names":["URL","API_KEY","searchImageByQuery","query","page","perPage","params","axios","error","gallery","galleryLightbox","SimpleLightbox","galleryItems","images","imageItems","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","searchInput","loader","loadMoreBtn","currentPage","currentQuery","event","userQuery","iziToast","data","cardHeight"],"mappings":"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"}